# perma.ws

- Try live now: https://www.perma.ws
- Demo video: https://www.youtube.com/watch?v=ltBT2kaWdZw

**perma.ws** ðŸ§Š represents the future of decentralized web archiving: provable, verifiable, and permanent. It's a decentralized archiving service that creates cryptographically-attested snapshots of web pages that can never be altered, deleted, or lost.

Every archive on perma.ws includes both a visual screenshot and a high-fidelity interactive archive (WACZ format) that preserves the full experience of the original webpage. But unlike traditional archiving services, every snapshot comes with a cryptographic attestation proving its authenticity.

You can read more about this project in [ABOUT.md](./ABOUT.md).

## Project structure

- `frontend`: Next.js 15 + React 19 + Tailwind CSS + Framer Motion
- `backend`: Rust-based [Nautilus server](./src/nautilus-server/src/apps/perma-ws/) in a Trusted Execution Environment (TEE)
- `storage`: archives are stored on Walrus decentralized storage via S3-compatible Nami.cloud
- `nautilus`: Nautilus framework for secure and verifiable off-chain computation on Sui

## Nautilus

[perma-ws Nautilus app](./src/nautilus-server/src/apps/perma-ws/) follows Nautilus structure closely. It is fully implemented in Rust.

In Nautilus, following actions are taken.
- call for full-page image screenshot
- call to scooper service to get WACZ high fidelity archive
- both archives are stored on Walrus async via above calls
- retrieval of BlobId and byte size of image screenshot for verification later

**About Nautilus:** Nautilus is a framework for **secure and verifiable off-chain computation on Sui**. For full product details, see the [Nautilus documentation](https://docs.sui.io/concepts/cryptography/nautilus).

[expose_enclave.sh](./expose_enclave.sh) needs to be updated with secrets:

```
API_KEY="###"
ACCESS_KEY="###"
STORAGE_ACCESS_KEY_ID="###"
STORAGE_SECRET_ACCESS_KEY="###"
ADMIN_SECRET="###"
SCOOPER_URL="###"
SCOOPER_SECRET="###"
FRONTEND_URL="https://www.perma.ws"
```

[run.sh](./src/nautilus-server/run.sh) can be used as it is as it has already been configured for allowed endpoints.

## Nautilus deployment proof

The server has been run in an enclave and successfully served `process_data` request. We can show to judges upon requests.

For demo, the server is deployed on Railway EC2.

```shell
[ec2-user@ip-172-31-36-235 perma-ws]$ cat out/nitro.pcrs
5403e349896535da77be32a130fbd2b1f0b1d49d19a25c9babfacdd77831b649874915812f32f7e284e343b17f680974 PCR0
5403e349896535da77be32a130fbd2b1f0b1d49d19a25c9babfacdd77831b649874915812f32f7e284e343b17f680974 PCR1
21b9efbc184807662e966d34f390821309eeac6802309798826296bf3e8bec7c10edb30948c90ba67310f7b964fc500a PCR2
```

```shell
[ec2-user@ip-172-31-36-235 perma-ws]$ make run
sudo nitro-cli \
        run-enclave \
        --cpu-count 2 \
        --memory 512M \
        --eif-path out/nitro.eif
Start allocating memory...
Started enclave with enclave-cid: 16, memory: 1024 MiB, cpu-ids: [1, 3]
{
  "EnclaveName": "nitro",
  "EnclaveID": "i-0663be7f56a98f444-enc19abc1f8fe91b25",
  "ProcessID": 35787,
  "EnclaveCID": 16,
  "NumberOfCPUs": 2,
  "CPUIDs": [
    1,
    3
  ],
  "MemoryMiB": 1024
}
```

```shell
curl -H 'Content-Type: application/json' -X GET http://34.226.199.141:3000/health_check

{"pk":"70f046c4e328f979b7a54fed43d4e25defd7d4f80c2607b84e4c4070855df6fa","endpoints_status":{}}%
```

```shell
curl -H 'Content-Type: application/json' -X GET http://34.226.199.141:3000/get_attestation

{"attestation":"8444a1013822a0591120bf696d6f64756c655f69647827692d30363633626537663536613938663434342d656e633031396162633166386665393162323566646967657374665348413338346974696d657374616d701b0000019abc2227ab6470637273b00058305403e349896535da77be32a130fbd2b1f0b1d49d19a25c9babfacdd77831b649874915812f32f7e284e343b17f6809740158305403e349896535da77be32a130fbd2b1f0b1d49d19a25c9babfacdd77831b649874915812f32f7e284e343b17f68097402583021b9efbc184807662e966d34f390821309eeac6802309798826296bf3e8bec7c10edb30948c90ba67310f7b964fc500a0358300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000458306052f1a6d01802368fb9334f52020a66aecad09e6d1c0485f74ed80a2ce2ad8e224b9bdd7116788ffbde623dd5b2ca720558300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000658300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000758300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000858300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000958300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f58300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006b636572746966696361746559027f3082027b30820201a0030201020210019abc1f8fe91b25000000006925ec12300a06082a8648ce3d04030330818e310b30090603550406130255533113301106035504080c0a57617368696e67746f6e3110300e06035504070c0753656174746c65310f300d060355040a0c06416d617a6f6e310c300a060355040b0c034157533139303706035504030c30692d30363633626537663536613938663434342e75732d656173742d312e6177732e6e6974726f2d656e636c61766573301e170d3235313132353137343930335a170d3235313132353230343930365a308193310b30090603550406130255533113301106035504080c0a57617368696e67746f6e3110300e06035504070c0753656174746c65310f300d060355040a0c06416d617a6f6e310c300a060355040b0c03415753313e303c06035504030c35692d30363633626537663536613938663434342d656e63303139616263316638666539316232352e75732d656173742d312e6177733076301006072a8648ce3d020106052b81040022036200040ea5310004b315bb60ac16e0bdc77a3ee0806b1282633d8e2630f62c3a63958799ccbfd2f9edbce21d0653037a71213c9b51b97f616b68e6c78bad6201e06430fe959c910e3878e09d19061b9dde3c400ad6025a06617d8b26a57be2a7a9cf6da31d301b300c0603551d130101ff04023000300b0603551d0f0404030206c0300a06082a8648ce3d0403030368003065023046aedbc6078cedaa9b142044e300cea70539829d84aaf20b7c53230d82445268f2aa1b60a57d2655915a0db4546576e5023100918a847829fb26998f4aa91f13c58c83c590e3b5a33e7e10484a22849e218317e2c41d531e658298131f603738010d2b68636162756e646c65845902153082021130820196a003020102021100f93175681b90afe11d46ccb4e4e7f856300a06082a8648ce3d0403033049310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c03415753311b301906035504030c126177732e6e6974726f2d656e636c61766573301e170d3139313032383133323830355a170d3439313032383134323830355a3049310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c03415753311b301906035504030c126177732e6e6974726f2d656e636c617665733076301006072a8648ce3d020106052b8104002203620004fc0254eba608c1f36870e29ada90be46383292736e894bfff672d989444b5051e534a4b1f6dbe3c0bc581a32b7b176070ede12d69a3fea211b66e752cf7dd1dd095f6f1370f4170843d9dc100121e4cf63012809664487c9796284304dc53ff4a3423040300f0603551d130101ff040530030101ff301d0603551d0e041604149025b50dd90547e796c396fa729dcf99a9df4b96300e0603551d0f0101ff040403020186300a06082a8648ce3d0403030369003066023100a37f2f91a1c9bd5ee7b8627c1698d255038e1f0343f95b63a9628c3d39809545a11ebcbf2e3b55d8aeee71b4c3d6adf3023100a2f39b1605b27028a5dd4ba069b5016e65b4fbde8fe0061d6a53197f9cdaf5d943bc61fc2beb03cb6fee8d2302f3dff65902c1308202bd30820244a00302010202101a0c15479e282fbb6dace849e24621e5300a06082a8648ce3d0403033049310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c03415753311b301906035504030c126177732e6e6974726f2d656e636c61766573301e170d3235313132313138303734355a170d3235313231313139303734355a3064310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c034157533136303406035504030c2d626438306463303565653235363965642e75732d656173742d312e6177732e6e6974726f2d656e636c617665733076301006072a8648ce3d020106052b8104002203620004e0334e3dac1145f4963a04dd4799d99714278f4a65e88c68d4846751276869b6cf7a2f5956c735cf66cb821d6926a3857e64395239deaa4b68ed5d2bda140d44353134b8583033d6d417f5da471b488c2c08fa90167605cb83b08ab76818ef70a381d53081d230120603551d130101ff040830060101ff020102301f0603551d230418301680149025b50dd90547e796c396fa729dcf99a9df4b96301d0603551d0e04160414fcc29f31bb71c7ec1e6f8865e1a18f28db55c38a300e0603551d0f0101ff040403020186306c0603551d1f046530633061a05fa05d865b687474703a2f2f6177732d6e6974726f2d656e636c617665732d63726c2e73332e616d617a6f6e6177732e636f6d2f63726c2f61623439363063632d376436332d343262642d396539662d3539333338636236376638342e63726c300a06082a8648ce3d040303036700306402303ebfcc8fea927eeec1ad72a579b1d3dfda09e22198f9dc1b04daa02355feb2d1741ec3d706bbdadb1c06ad5381b833fa02301706c92d7802accc336f21822f72b262a47da505afcbba41ed38833bf2794e5afdc681f3110af3f26c7bc913c2164f2f590318308203143082029ba003020102021100de5c12a29b6335a6b7d3dbcdee3c700b300a06082a8648ce3d0403033064310b3009060355040613025553310f300d060355040a0c06416d617a6f6e310c300a060355040b0c034157533136303406035504030c2d626438306463303565653235363965642e75732d656173742d312e6177732e6e6974726f2d656e636c61766573301e170d3235313132353131323435385a170d3235313230313037323435375a308189313c303a06035504030c33653434636637333535383839633866622e7a6f6e616c2e75732d656173742d312e6177732e6e6974726f2d656e636c61766573310c300a060355040b0c03415753310f300d060355040a0c06416d617a6f6e310b3009060355040613025553310b300906035504080c0257413110300e06035504070c0753656174746c653076301006072a8648ce3d020106052b81040022036200049550da4b102844605fab896856094b75f3a749507cbe367dc5858fdabd0c2cd9b749060ff77523932c322f929a4c0e64d4f0a5ea54f7088abe3e548266a2f144f8b0d92b1a5fa86293744e71aa2aaf8a0114e0c26e7fcd304e742f3d4ae59db4a381ea3081e730120603551d130101ff040830060101ff020101301f0603551d23041830168014fcc29f31bb71c7ec1e6f8865e1a18f28db55c38a301d0603551d0e0416041452261b3a525e4347199912525ab07779b10e5e1f300e0603551d0f0101ff0404030201863081800603551d1f047930773075a073a071866f687474703a2f2f63726c2d75732d656173742d312d6177732d6e6974726f2d656e636c617665732e73332e75732d656173742d312e616d617a6f6e6177732e636f6d2f63726c2f61616438646439352d383462332d346435332d383963632d3537383734393431653834352e63726c300a06082a8648ce3d040303036700306402307d0e70cc1f644b6117746fd7d1fd39abf7285af0d163423cfcb4fcfd4e132b6e5e6ab2904ce595759828d59a3f99ded2023026dfeeb80866336a5308e7cc59e3e7afb37baa5a3b73d1ff2cf67b861756d0f2d0d49d8da9e66e591d9d4e783fc000615902c3308202bf30820245a003020102021500d1df5b14fe9a783f7d2eeb743175cd03f8796a33300a06082a8648ce3d040303308189313c303a06035504030c33653434636637333535383839633866622e7a6f6e616c2e75732d656173742d312e6177732e6e6974726f2d656e636c61766573310c300a060355040b0c03415753310f300d060355040a0c06416d617a6f6e310b3009060355040613025553310b300906035504080c0257413110300e06035504070c0753656174746c65301e170d3235313132353137333730325a170d3235313132363137333730325a30818e310b30090603550406130255533113301106035504080c0a57617368696e67746f6e3110300e06035504070c0753656174746c65310f300d060355040a0c06416d617a6f6e310c300a060355040b0c034157533139303706035504030c30692d30363633626537663536613938663434342e75732d656173742d312e6177732e6e6974726f2d656e636c617665733076301006072a8648ce3d020106052b810400220362000468b9356b4678e735dda899b0230b043f5f4b7da4711842bae9daccd2018cb85084286e2e0b41b607de35df83cf88ab8a3ffd16f1b6b020d30ab81536682e132832eefea8f0f95d947c09982f80baf20afc22e5b4ac8dbc6f67f007d4221bef31a366306430120603551d130101ff040830060101ff020100300e0603551d0f0101ff040403020204301d0603551d0e04160414090d9779092946236757889ddcceda6b6eb266a0301f0603551d2304183016801452261b3a525e4347199912525ab07779b10e5e1f300a06082a8648ce3d0403030368003065023043fc28dceebdc435f3f340ae2186890f3c118d2b68ccf5373491520bb6cd086cb2399123f809750b9a1fcfcfafb7a580023100f96527315465cfdf63122b10d33cf221d5337155a13b88e2df91bd2feec0e27de1aa3211f722cc4afe334d6467ee049c6a7075626c69635f6b6579582070f046c4e328f979b7a54fed43d4e25defd7d4f80c2607b84e4c4070855df6fa69757365725f64617461f6656e6f6e6365f6ff58606a734542d7e58752d47ade465589edbb02427d981f3dbd5e5d4da606edf809a0febf2cfb466117cbbb0c7ed533cc7a12eff51de2698dd2a57e8aa7f164476b2a684a75287e73c27ea2f760d6d253eb8f1eb09dc424b51d246014a61eb0208bb0"}%
```
